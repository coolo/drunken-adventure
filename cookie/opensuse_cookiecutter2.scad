
// Module names are of the form poly_<inkscape-path-id>().  As a result,
// you can associate a polygon in this OpenSCAD program with the corresponding
// SVG element in the Inkscape document by looking for the XML element with
// the attribute id="inkscape-path-id".

// fudge value is used to ensure that subtracted solids are a tad taller
// in the z dimension than the polygon being subtracted from.  This helps
// keep the resulting .stl file manifold.
fudge = 0.1;

module poly_rand(h)
{
  scale([25.4/90, -25.4/90, 1]) union()
  {
    difference()
    {
       linear_extrude(height=h)
         polygon([[1.687293,-67.635829],[-12.398841,-67.038213],[-26.374592,-65.302694],[-40.186588,-62.561868],[-53.781457,-58.948329],[-54.437769,-61.259390],[-55.693724,-62.976301],[-57.416345,-64.158063],[-59.472653,-64.863673],[-64.054421,-65.082435],[-68.375207,-64.104579],[-93.187492,-58.418740],[-99.263428,-56.613827],[-105.148085,-54.364224],[-110.771248,-51.524276],[-116.062707,-47.948329],[-119.296967,-43.477041],[-122.107577,-38.671150],[-124.448565,-33.593411],[-126.273961,-28.306575],[-127.537793,-22.873397],[-128.194092,-17.356627],[-128.196887,-11.819021],[-127.500207,-6.323329],[-125.416095,-2.070625],[-122.524654,1.431332],[-118.984866,4.279071],[-114.955718,6.569117],[-110.596193,8.397998],[-106.065277,9.862241],[-97.125207,12.082921],[-86.445629,13.409289],[-75.663788,13.480690],[-54.187707,12.145421],[-52.066642,13.567143],[-50.809266,15.469066],[-50.275908,17.724379],[-50.326897,20.206270],[-51.623227,25.342538],[-53.580887,29.863381],[-54.297282,31.813677],[-55.436975,33.689823],[-58.162027,37.356243],[-59.335272,39.214809],[-60.107588,41.135805],[-60.272919,43.153377],[-59.625207,45.301671],[-58.090908,46.784475],[-56.294741,47.695050],[-54.321756,48.095963],[-52.257009,48.049780],[-48.192439,46.866393],[-44.781457,44.645421],[-40.801743,43.204177],[-37.055528,41.345897],[-30.226969,36.587208],[-24.222529,30.787314],[-18.968957,24.364171],[-15.659321,21.401978],[-11.862630,18.846945],[-7.713186,16.821564],[-3.345289,15.448328],[1.106758,14.849729],[5.508655,15.148258],[9.726101,16.466408],[13.624793,18.926671],[15.215553,21.923628],[15.900236,25.182799],[15.831749,32.114647],[15.718771,35.600756],[15.980097,38.975944],[16.935823,42.146927],[18.906043,45.020421],[25.438882,43.420582],[31.815523,41.079148],[37.643675,37.778664],[42.531043,33.301671],[43.373676,39.056472],[44.421386,44.907007],[46.484861,50.290812],[48.150852,52.631920],[50.374793,54.645421],[53.779797,57.963046],[57.522517,60.782602],[61.552274,63.110559],[65.818387,64.953390],[70.270175,66.317564],[74.856958,67.209554],[79.528056,67.635829],[84.232787,67.602862],[88.920472,67.117123],[93.540429,66.185084],[98.041979,64.813216],[102.374441,63.007989],[106.487133,60.775875],[110.329377,58.123345],[113.850490,55.056870],[116.999793,51.582921],[119.818176,48.059254],[122.211758,44.312092],[125.763411,36.272809],[127.732528,27.716113],[128.196887,18.893046],[127.234266,10.054651],[124.922441,1.451970],[121.339191,-6.663954],[116.562293,-14.042079],[108.646981,-23.816886],[99.704066,-32.571983],[89.876215,-40.333880],[79.306093,-47.129087],[68.136367,-52.984113],[56.509703,-57.925469],[44.568767,-61.979664],[32.456223,-65.173209],[24.831908,-66.423297],[17.151329,-67.232958],[1.687293,-67.635829]]);
       translate([0, 0, -fudge])
         linear_extrude(height=h+2*fudge)
           polygon([[3.062293,-56.885829],[17.645223,-56.311262],[32.063984,-54.110644],[46.155766,-50.350138],[59.757757,-45.095908],[72.707144,-38.414116],[84.841115,-30.370925],[95.996859,-21.032498],[106.011563,-10.464999],[110.083057,-4.499902],[113.373531,2.049973],[115.759724,9.001315],[117.118373,16.170815],[117.326217,23.375160],[116.259993,30.431042],[113.796439,37.155149],[109.812293,43.364171],[107.418591,46.179458],[104.699530,48.685669],[98.467242,52.735463],[91.479247,55.442764],[84.099362,56.736780],[76.691406,56.546719],[69.619197,54.801791],[66.322691,53.324130],[63.246554,51.431206],[60.436262,49.114169],[57.937293,46.364171],[55.272450,41.719530],[53.966626,36.648266],[53.747698,31.372455],[54.343543,26.114171],[53.067840,22.493386],[50.527067,19.889371],[47.144260,18.310438],[43.342457,17.764901],[39.544696,18.261073],[36.174016,19.807266],[33.653452,22.411795],[32.844163,24.113532],[32.406043,26.082971],[31.652198,27.753652],[30.047697,29.109828],[28.130181,29.866638],[26.437293,29.739221],[26.907394,24.951381],[26.124154,20.290240],[24.254231,15.920508],[21.464278,12.006901],[17.920953,8.714130],[13.790909,6.206910],[9.240804,4.649952],[4.437293,4.207971],[-1.539394,4.244367],[-7.303576,5.291126],[-12.807470,7.233514],[-18.003292,9.956798],[-22.843260,13.346245],[-27.279590,17.287120],[-31.264500,21.664690],[-34.750207,26.364221],[-38.848748,29.836161],[-41.053839,31.249300],[-42.968957,32.020471],[-41.140658,28.412537],[-39.834473,24.408433],[-39.125867,20.192644],[-39.090302,15.949658],[-39.803240,11.863961],[-41.340145,8.120040],[-43.776480,4.902381],[-47.187707,2.395471],[-50.529926,1.467659],[-53.946275,1.057808],[-60.927632,1.260365],[-67.984319,1.939889],[-74.968877,2.033131],[-81.631828,1.835759],[-88.457817,1.411535],[-94.937793,-0.087870],[-97.888948,-1.505866],[-100.562707,-3.510779],[-100.871488,-10.490439],[-100.463028,-17.526952],[-99.987220,-24.586628],[-100.093957,-31.635779],[-99.699721,-34.657528],[-98.474912,-37.091315],[-96.602245,-39.057645],[-94.264433,-40.677019],[-88.924238,-43.356918],[-83.916047,-46.095039],[-74.564466,-50.555805],[-69.688910,-52.246347],[-64.812707,-53.385779],[-64.904850,-51.578532],[-64.496686,-49.950239],[-62.502397,-47.418714],[-59.475763,-46.167596],[-57.777168,-46.139813],[-56.062707,-46.573279],[-44.518517,-50.318595],[-32.702064,-53.126922],[-20.698745,-55.119364],[-8.593957,-56.417029],[3.062293,-56.885779]]);
    }
  }
}

module poly_body(h)
{
  scale([25.4/90, -25.4/90, 1]) union()
  {
    difference()
    {
       linear_extrude(height=h)
         polygon([[10.679649,-63.594859],[-6.039101,-63.407359],[-22.627135,-61.805659],[-37.783396,-58.955180],[-57.382851,-53.626109],[-57.445351,-59.626109],[-57.476551,-59.938609],[-57.601551,-60.219859],[-57.695251,-60.438609],[-57.976501,-60.938609],[-58.539001,-61.126109],[-58.820251,-61.251109],[-59.132751,-61.344809],[-59.445251,-61.313609],[-79.945251,-57.501109],[-96.285394,-53.212308],[-103.872221,-50.501757],[-110.289001,-47.407359],[-114.289001,-43.907359],[-114.289001,-43.876159],[-114.320201,-43.844959],[-117.719214,-38.281397],[-120.757701,-30.657459],[-124.476451,-18.219959],[-124.507651,-18.032459],[-124.476601,-17.844859],[-124.007851,-13.688609],[-123.695351,-10.751109],[-123.539101,-9.688609],[-123.445401,-9.126109],[-123.476601,-9.126109],[-123.445401,-9.063609],[-122.382901,-5.251109],[-122.351701,-5.157409],[-122.101701,-4.563659],[-122.070501,-4.532459],[-120.226751,-1.438709],[-120.195551,-1.407509],[-115.923693,1.350211],[-109.633051,4.217491],[-102.839589,6.538479],[-94.807330,8.292100],[-86.047307,9.383417],[-77.070551,9.717491],[-77.039351,9.717491],[-77.008151,9.717491],[-65.226901,8.717491],[-65.195701,8.717491],[-57.730789,8.004729],[-52.008201,8.342491],[-48.383201,10.373741],[-47.177368,12.327380],[-46.383201,15.217491],[-46.245801,19.657983],[-47.033785,24.219581],[-50.320701,32.811241],[-54.008201,39.217491],[-55.289451,41.061241],[-55.664451,41.561241],[-55.758151,41.686241],[-56.101901,42.029991],[-56.101901,42.592491],[-56.101901,42.998741],[-56.101901,44.123741],[-55.008151,44.373741],[-54.633151,44.467441],[-54.133151,44.592441],[-53.695651,44.404941],[-44.320651,40.092441],[-37.820651,37.092441],[-35.601901,36.061191],[-34.914401,35.717441],[-34.695651,35.623741],[-34.476901,35.498741],[-34.414401,35.436241],[-33.883151,35.092491],[-33.851951,35.061291],[-33.789451,34.998791],[-33.289451,34.623791],[-33.226951,34.561291],[-33.164451,34.498791],[-23.195701,23.436291],[-19.101529,19.283292],[-14.920796,16.073908],[-6.488634,12.146006],[1.722807,10.972622],[9.335549,11.873791],[12.950842,13.457677],[16.335549,15.936291],[18.895391,20.078238],[20.116799,25.217541],[20.210499,33.998791],[19.835499,37.811291],[19.647999,38.655041],[19.554299,38.998791],[19.647999,39.342541],[19.741699,39.748791],[20.022949,40.811291],[21.116699,40.811291],[21.522949,40.811291],[21.866699,40.811291],[22.147949,40.686291],[22.304199,40.592591],[22.366699,40.561391],[37.397949,33.998891],[37.897949,33.780141],[38.116699,33.248891],[41.147949,26.155141],[47.085449,27.530141],[47.022949,31.748891],[47.335449,39.717641],[47.335449,39.748841],[48.903932,45.060110],[51.577017,49.697205],[55.176194,53.696055],[59.522949,57.092591],[68.862931,61.614769],[79.228859,63.594859],[89.765269,63.050378],[99.616699,59.998841],[104.556677,57.254914],[109.084849,53.884111],[116.679199,45.530091],[120.686285,38.545275],[123.304199,31.155091],[124.507651,22.611931],[124.147851,14.570056],[122.827162,7.648824],[121.147949,2.467591],[114.905307,-9.611287],[106.432139,-20.767997],[95.754375,-30.970976],[82.897949,-40.188659],[82.866749,-40.188659],[81.772999,-40.876159],[81.772999,-40.907359],[70.991604,-47.062468],[60.782168,-52.018413],[42.017954,-58.834470],[25.357925,-62.358846],[10.679649,-63.594859]]);
       translate([0, 0, -fudge])
         linear_extrude(height=h+2*fudge)
           polygon([[10.617149,-60.782359],[24.993503,-59.591762],[41.269026,-56.147046],[59.632673,-49.449674],[69.656591,-44.569199],[80.273399,-38.501109],[81.367149,-37.813609],[81.367149,-37.782409],[93.928838,-28.789456],[104.307562,-18.892105],[112.505142,-8.111781],[118.523399,3.530091],[120.057849,8.334015],[121.292239,14.890126],[121.650021,22.500595],[120.554649,30.467591],[118.116312,37.358657],[114.367149,43.905091],[107.261499,51.726071],[98.429649,57.436341],[98.429649,57.405141],[89.295727,60.201457],[79.439364,60.687249],[69.750018,58.860112],[61.117149,54.717641],[57.115857,51.613982],[53.869330,48.047403],[51.496713,43.956568],[50.117149,39.280141],[49.867149,31.748891],[49.929649,26.436391],[49.960849,25.280141],[48.835849,25.030141],[40.648349,23.123891],[39.492099,22.842641],[39.023349,23.936391],[35.742099,31.623891],[22.742099,37.311391],[23.023349,34.217641],[22.929649,24.842641],[21.547179,19.013989],[18.304649,13.905141],[18.304649,13.873941],[14.395605,10.986930],[10.117149,9.155191],[10.085949,9.123991],[10.054749,9.123991],[1.737271,8.162000],[-7.269698,9.468580],[-11.875444,11.181493],[-16.466006,13.712240],[-20.978865,17.144385],[-25.351501,21.561491],[-25.351501,21.592691],[-35.070251,32.405191],[-35.163951,32.498891],[-35.476601,32.717641],[-36.070351,33.123891],[-36.101551,33.155091],[-36.195251,33.186291],[-36.820251,33.498791],[-39.007751,34.530041],[-45.507751,37.530041],[-51.320251,40.186291],[-47.757751,34.092541],[-44.235293,24.924826],[-43.384605,19.881932],[-43.570251,14.780041],[-44.567880,11.217028],[-46.257751,8.498791],[-48.571339,6.632991],[-51.351501,5.561291],[-57.882039,5.133429],[-65.539001,5.905041],[-77.101501,6.873791],[-77.132701,6.873791],[-85.849771,6.533621],[-94.363964,5.455917],[-102.106275,3.766838],[-108.507701,1.592541],[-114.647075,-1.232698],[-118.320201,-3.563709],[-118.351401,-3.563709],[-119.445151,-5.626209],[-119.476351,-5.626209],[-119.476351,-5.657409],[-119.788851,-6.344909],[-119.788851,-6.376109],[-119.820051,-6.438609],[-120.695051,-9.657359],[-120.695051,-9.719859],[-120.695051,-9.751059],[-120.757551,-10.063559],[-120.882551,-11.063559],[-121.195051,-14.001059],[-121.632551,-17.876059],[-118.070051,-29.688559],[-115.014789,-37.155245],[-112.226301,-41.938559],[-112.257501,-41.938559],[-108.851251,-44.969809],[-102.811782,-47.863692],[-95.448609,-50.489860],[-79.320001,-54.751059],[-60.288751,-58.313559],[-60.195051,-51.688559],[-60.195051,-49.719809],[-58.320051,-50.344809],[-39.668440,-55.554796],[-23.547214,-58.754533],[-5.913801,-60.563559],[10.617449,-60.782309]]);
    }
  }
}

module poly_eye(h)
{
  scale([25.4/90, -25.4/90, 1]) union()
  {
    linear_extrude(height=h)
      polygon([[-96.376601,-18.794859],[-100.876601,-19.519859],[-104.776601,-21.894859],[-107.451601,-25.569859],[-108.476601,-29.994859],[-107.709414,-34.543296],[-105.339101,-38.332359],[-101.712539,-40.977671],[-97.176601,-42.094859],[-92.676601,-41.369859],[-88.776601,-38.994859],[-86.101601,-35.319859],[-85.076601,-30.894859],[-85.857851,-26.290171],[-88.251601,-22.482359],[-91.882851,-19.855796],[-96.376601,-18.794859]]);
  }
}

module poly_mouth(h)
{
  scale([25.4/90, -25.4/90, 1]) union()
  {
    linear_extrude(height=h)
      polygon([[-123.126601,-18.344859],[-121.826601,-17.444859],[-113.676601,-12.707359],[-107.595351,-10.821421],[-100.426601,-10.444859],[-93.098476,-11.866734],[-84.776601,-14.919859],[-75.479726,-19.585484],[-65.226601,-25.844859],[-69.326601,-16.044859],[-69.526601,-15.844859],[-82.539101,-9.857359],[-92.518789,-6.324546],[-101.326601,-4.844859],[-107.332851,-5.544859],[-113.001601,-7.144859],[-121.226601,-10.944859],[-122.326601,-11.144859],[-123.126601,-18.344859]]);
  }
}

module poly_innertail(h)
{
  scale([25.4/90, -25.4/90, 1]) union()
  {
    linear_extrude(height=h)
      polygon([[39.323399,23.555141],[44.590586,13.553579],[51.835899,5.417641],[60.599961,-0.449546],[65.407969,-2.406382],[70.423399,-3.644859],[78.489024,-4.340171],[87.923399,-3.057359],[92.702695,-1.220054],[97.282774,1.656704],[101.483164,5.754555],[105.123399,11.255141],[107.167149,16.828579],[107.748399,22.842641],[106.867149,28.987954],[104.523399,34.955141],[100.859336,40.275454],[96.135899,44.442641],[90.531211,47.316079],[84.223399,48.755141],[78.121836,48.889516],[72.910899,47.955141],[68.656211,45.970766],[65.423399,42.955141],[63.215586,39.081704],[62.160899,34.842641],[62.287461,30.509829],[63.623399,26.355141],[66.004649,22.583266],[68.948399,19.805141],[72.454649,18.002016],[76.523399,17.155141],[79.659336,17.250454],[82.260899,17.992641],[85.523399,20.555141],[86.523399,23.855141],[86.523399,23.955141],[85.901524,26.614516],[84.473399,28.280141],[81.823399,29.455141],[78.823399,29.055141],[78.023399,28.755141],[77.523399,28.555141],[77.123399,28.455141],[75.054649,28.473891],[73.173399,29.205141],[71.667149,30.536391],[70.723399,32.355141],[70.523399,33.855141],[71.173399,36.417641],[73.023399,38.455141],[72.923399,38.455141],[73.123399,38.555141],[73.423399,38.755141],[75.823399,39.755141],[82.023399,40.855141],[87.424961,39.777016],[92.685899,36.580141],[96.690586,31.320766],[97.873203,27.935219],[98.323399,24.055141],[97.810899,19.539516],[96.173399,15.380141],[93.485899,11.708266],[89.823399,8.655141],[84.335899,6.147329],[77.648399,5.092641],[70.248399,5.969204],[62.623399,9.255141],[57.753086,12.992641],[54.035899,17.330141],[51.387461,22.080141],[49.723399,27.055141]]);
  }
}

scale_factory = 1.4;
height = 5;
pupil_height = 0.8;
press_height = 1;

scale([scale_factor, scale_factor*1.05, scale_factor]) {
  poly_body(height);


 difference() { 
  poly_eye(height-press_height);
  translate([-28,8.9,height-pupil_height-press_height])
    scale([1.4,1,1])
      cylinder(h=pupil_height+0.3, r1 = 0.9, r2 = 1.1, center = false, $fs = .1);
 }

  poly_mouth(height-press_height);
  poly_innertail(height-press_height);

  poly_rand(0.7);
}
